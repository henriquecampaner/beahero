<h1 align="center">
  <img alt="Be The Hero" title="Be The Hero" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjEwNiIgdmlld0JveD0iMCAwIDI1MCAxMDYiIGZpbGw9%0D%0AIm5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik05My45%0D%0AMyA5NC4yOTg3SDc2Ljg2NjhMODcuMTE4NSA1OS40MDEzSDc4LjQ0OTNMNjQuMjA3MSAxMDZINDcu%0D%0AMTQzOUw3NS4zNTMyIDExLjYzMjVIOTIuNDE2M0w4Mi43ODM5IDQ0Ljc0MDNIOTEuNDUzMUwxMDUu%0D%0AMTQ1IDBIMTIyLjIwOEw5My45MyA5NC4yOTg3WiIgZmlsbD0iI0UwMjA0MSIvPgo8cGF0aCBkPSJN%0D%0AMTIzLjU4NCAxMS42MzI1SDE1Ni4xMjhMMTUxLjI0MyAyNi41SDEzNi40NUwxMzEuMDg0IDQ0LjY3%0D%0AMTRIMTQ1Ljk0NUwxNDEuMjY3IDU5LjMzMjVIMTI2Ljc0OUwxMjEuMDM4IDc4LjUzNjRIMTM2Ljg2%0D%0AM0wxMzEuMTUyIDk0LjIyOTlIOTkuMjI3OEwxMjMuNTg0IDExLjYzMjVaIiBmaWxsPSIjRTAyMDQx%0D%0AIi8+CjxwYXRoIGQ9Ik0xNTEuMzEyIDEwNkgxMzQuMTExTDE2MS41NjMgMTEuNjMyNUgxOTIuOEMx%0D%0AOTYuNTE1IDExLjYzMjUgMTk4Ljk5MiAxMi42NjQ5IDIwMC4yOTkgMTQuNzk4N0MyMDEuNjA3IDE2%0D%0ALjkzMjUgMjAxLjgxMyAxOS4zNDE2IDIwMC45ODggMjIuMDk0OEwxOTIuNzMxIDUwLjE3NzlDMTky%0D%0ALjMxOCA1MS40MTY5IDE5MS41NjEgNTIuNTE4MiAxOTAuMzkyIDUzLjU1MDdDMTg5LjIyMiA1NC41%0D%0AODMxIDE4Ny41NzEgNTUuMDY0OSAxODUuNDM4IDU1LjA2NDlDMTg2Ljc0NSA1NS4yNzE0IDE4Ny44%0D%0ANDYgNTYuMDk3NCAxODguNzQxIDU3LjU0MjlDMTg5LjYzNSA1OC45ODgzIDE4OS42MzUgNjEuMTkw%0D%0AOSAxODguNzQxIDY0LjE1MDdMMTc5Ljg2NSA5NC4yOTg3SDE2Mi43MzNMMTcyLjIyOCA2MS44Nzky%0D%0AQzE3Mi40MzQgNjEuMTkwOSAxNzIuNTAzIDYwLjU3MTQgMTcyLjI5NyA1OS45NTJDMTcyLjA5IDU5%0D%0ALjMzMjUgMTcxLjQ3MSA1OS4wNTcxIDE3MC40MzkgNTkuMDU3MUgxNjQuNzI4TDE1MS4zMTIgMTA2%0D%0AWk0xNzQuMTU0IDQ2Ljg3NEMxNzQuOTggNDYuODc0IDE3NS43MzcgNDYuNjY3NSAxNzYuNDk0IDQ2%0D%0ALjI1NDZDMTc3LjE4MiA0NS44NDE2IDE3Ny43MzIgNDUuMDE1NiAxNzguMTQ1IDQzLjcwNzhMMTgy%0D%0ALjY4NiAyOC4zNTg0QzE4My4zNzQgMjYuMDg3IDE4Mi40NzkgMjQuOTE2OSAxODAuMDcxIDI0Ljkx%0D%0ANjlIMTc0LjcwNUwxNjguMjM3IDQ2Ljg3NEgxNzQuMTU0WiIgZmlsbD0iI0UwMjA0MSIvPgo8cGF0%0D%0AaCBkPSJNMjQyLjk1NyAxMS42MzI1QzI0NS42NDEgMTEuNjMyNSAyNDcuNTY3IDEyLjU5NjEgMjQ4%0D%0ALjgwNiAxNC41MjM0QzI1MC4wNDQgMTYuNDUwNyAyNTAuMzE5IDE4LjY1MzMgMjQ5LjYzMSAyMS4w%0D%0ANjIzTDIzMC42NDIgODUuNTU3MkMyMjkuNjEgODguOTk4NyAyMjcuODIxIDkxLjI3MDEgMjI1LjM0%0D%0ANCA5Mi41MDkxQzIyMi44NjcgOTMuNzQ4MSAyMjAuMTg0IDk0LjI5ODcgMjE3LjM2MyA5NC4yOTg3%0D%0ASDE5Ni45OTdDMTk1LjU1MiA5NC4yOTg3IDE5NC4yNDUgOTQuMDIzNCAxOTMuMDA2IDkzLjU0MTZD%0D%0AMTkxLjc2OCA5My4wNTk4IDE5MC44MDUgOTIuMzAyNiAxODkuOTc5IDkxLjMzOUMxODkuMTUzIDkw%0D%0ALjM3NTMgMTg4LjY3MiA4OS4xMzY0IDE4OC4zOTcgODcuNzU5OEMxODguMTIxIDg2LjM4MzEgMTg4%0D%0ALjI1OSA4NC44IDE4OC44MDkgODMuMDEwNEwyMDcuNDU1IDE5LjY4NTdDMjA4LjA3NCAxNy4yNzY2%0D%0AIDIwOS4zMTMgMTUuMjgwNSAyMTEuMTcgMTMuODM1MUMyMTMuMDI4IDEyLjM4OTYgMjE1LjM2NyAx%0D%0AMS42MzI1IDIxOC4xODggMTEuNjMyNUgyNDIuOTU3Wk0yMjUuMDY5IDI0LjkxNjlDMjI0LjI0MyAy%0D%0ANC45MTY5IDIyMy42MjQgMjUuMTIzNCAyMjMuMjggMjUuNDY3NUMyMjIuODY3IDI1Ljg4MDUgMjIy%0D%0ALjY2MSAyNi4zNjIzIDIyMi40NTQgMjYuOTEzTDIwNy4yNDkgNzguMzk4N0MyMDYuODM2IDc5Ljc3%0D%0ANTMgMjA3LjM4NiA4MC40NjM3IDIwOC44MzEgODAuNDYzN0gyMTMuMjM1QzIxNC42NzkgODAuNDYz%0D%0ANyAyMTUuNTc0IDc5Ljc3NTMgMjE1Ljk4NyA3OC4zOTg3TDIzMS4xMjMgMjYuOTgxOEMyMzEuNDY3%0D%0AIDI1LjUzNjQgMjMwLjkxNyAyNC44NDgxIDIyOS40MDMgMjQuODQ4MUgyMjUuMDY5VjI0LjkxNjla%0D%0AIiBmaWxsPSIjRTAyMDQxIi8+CjxwYXRoIGQ9Ik0zMS40NDMgMjAuNjQ5NEg0Mi41MjAzQzQzLjk2%0D%0ANTIgMjAuNjQ5NCA0NC44NTk2IDIxLjA2MjQgNDUuMjcyNCAyMS44MTk1QzQ1LjY4NTMgMjIuNTc2%0D%0ANiA0NS43NTQxIDIzLjQ3MTQgNDUuNDc4OCAyNC41NzI3TDQyLjg2NDMgMzMuNTIwOEM0Mi43MjY3%0D%0AIDM0LjA3MTQgNDIuMzgyNyAzNC41NTMzIDQxLjgzMjMgMzQuOTY2M0M0MS4yODE5IDM1LjQ0ODEg%0D%0ANDAuNDU2MiAzNS41ODU3IDM5LjQyNDIgMzUuNTg1N0MzOS45NzQ2IDM1LjU4NTcgNDAuMzg3NCAz%0D%0ANS43MjM0IDQwLjY2MjYgMzUuOTI5OUM0MS4wMDY3IDM2LjEzNjQgNDEuMjEzMSAzNi40MTE3IDQx%0D%0ALjM1MDcgMzYuNzU1OUM0MS40ODgzIDM3LjEgNDEuNTU3MSAzNy40NDQyIDQxLjU1NzEgMzcuODU3%0D%0AMkM0MS41NTcxIDM4LjI3MDEgNDEuNDg4MyAzOC42ODMxIDQxLjQxOTUgMzkuMDI3M0wzOC45NDI2%0D%0AIDQ3LjIxODJDMzguNjY3MyA0OC4xODE4IDM4LjExNjkgNDguOTM5IDM3LjQyODkgNDkuNDg5NkMz%0D%0ANi43NDA5IDUwLjA0MDMgMzUuNjQgNTAuMzE1NiAzNC4zMzI4IDUwLjMxNTZIMjIuNzA1TDMxLjQ0%0D%0AMyAyMC42NDk0Wk0zMi41NDM5IDQ1LjQyODZDMzIuODE5MSA0NS40Mjg2IDMzLjA5NDMgNDUuMzU5%0D%0AOCAzMy4zMDA3IDQ1LjI5MDlDMzMuNTA3MSA0NS4xNTMzIDMzLjcxMzUgNDQuODc3OSAzMy44NTEx%0D%0AIDQ0LjQ2NUwzNS42NCAzOC40NzY2QzM1Ljc3NzYgMzguMDYzNyAzNS43Nzc2IDM3Ljc4ODMgMzUu%0D%0ANjQgMzcuNTEzQzM1LjUwMjQgMzcuMjM3NyAzNS4yMjcyIDM3LjE2ODggMzQuODE0NCAzNy4xNjg4%0D%0ASDMyLjg4NzlMMzAuNDExIDQ1LjQ5NzRIMzIuNTQzOVY0NS40Mjg2Wk0zNS45MTUyIDMzLjE3NjZD%0D%0AMzYuMzI4IDMzLjE3NjYgMzYuNjcyMSAzMy4xMDc4IDM2Ljg3ODUgMzIuOTcwMUMzNy4wODQ5IDMy%0D%0ALjgzMjUgMzcuMjkxMyAzMi41NTcyIDM3LjQyODkgMzIuMDc1M0wzOS4wMTE0IDI2LjcwNjVDMzku%0D%0AMTQ5IDI2LjI5MzUgMzkuMTQ5IDI2LjAxODIgMzkuMDgwMiAyNS44MTE3QzM4Ljk0MjYgMjUuNjA1%0D%0AMiAzOC42NjczIDI1LjQ2NzUgMzguMjU0NSAyNS40Njc1SDM2LjI1OTJMMzMuOTg4NyAzMy4xNzY2%0D%0ASDM1LjkxNTJaIiBmaWxsPSIjNDE0MTREIi8+CjxwYXRoIGQ9Ik00OC43ODEyIDIwLjY0OTRINjAu%0D%0ANDc3N0w1OC44OTUyIDI2LjAxODJINTMuMzkxTDUxLjQ2NDUgMzIuNTU3Mkg1Ni44MzExTDU1LjI0%0D%0AODcgMzcuODU3Mkg0OS44ODJMNDcuODE3OSA0NC43NDAzSDUzLjUyODZMNTEuNDY0NSA1MC4zODQ0%0D%0ASDQwLjA0MzJMNDguNzgxMiAyMC42NDk0WiIgZmlsbD0iIzQxNDE0RCIvPgo8cGF0aCBkPSJNMTgu%0D%0AOTg5NyA1NS41NDY4TDE3LjQwNzIgNjAuOTE1NkgxMy4yMTAyTDYuMTIzNDcgODUuMjEzSDBMNy4y%0D%0AMjQzMiA2MC44NDY4SDIuOTU4NTNMNC41NDEgNTUuNDc3OUgxOC45ODk3VjU1LjU0NjhaIiBmaWxs%0D%0APSIjNDE0MTREIi8+CjxwYXRoIGQ9Ik0yNy4zMTQ5IDg1LjIxM0gyMS4xOTE1TDI0LjgzOCA3Mi42%0D%0AODU4SDIxLjc0MTlMMTguMDI2NSA4NS4yMTNIMTEuOTAzTDIwLjY0MSA1NS41NDY4SDI2Ljc2NDVM%0D%0AMjMuMzI0NCA2Ny40NTQ2SDI2LjQyMDVMMjkuOTI5NSA1NS41NDY4SDM2LjA1MjlMMjcuMzE0OSA4%0D%0ANS4yMTNaIiBmaWxsPSIjNDE0MTREIi8+CjxwYXRoIGQ9Ik0zNy45Nzk0IDU1LjU0NjhINDkuNjc1%0D%0AOUw0OC4wOTM0IDYwLjkxNTZINDIuNTg5Mkw0MC42NjI3IDY3LjQ1NDZINDYuMDI5M0w0NC40NDY5%0D%0AIDcyLjc1NDZIMzkuMDgwMkwzNy4wMTYxIDc5LjYzNzdINDIuNzI2OEw0MC42NjI3IDg1LjI4MTlI%0D%0AMjkuMjQxNEwzNy45Nzk0IDU1LjU0NjhaIiBmaWxsPSIjNDE0MTREIi8+Cjwvc3ZnPg==" width="300px" /> <br />
	API
</h1>

## :rocket: Technology

This project was developed with the following technologies:

- [Node.js](https://nodejs.org/en/)
- [Express](https://expressjs.com/)
- [nodemon](https://nodemon.io/)
- [Sucrase](https://github.com/alangpierce/sucrase)
- [Jest](https://jestjs.io/)
- [supertest](https://github.com/visionmedia/supertest)
- [Sqlite3](https://www.sqlite.org/index.html)
- [Knex](http://knexjs.org/)
- [celebrate](https://www.npmjs.com/package/celebrate/)
- [VS Code](https://code.visualstudio.com/) with [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)




## Routes


### Sessions

Used for admin authentication only:

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
POST | /sessions | ❌ | <code><span style="color:red">email</span></code> e <code><span style="color:red">password</span></code> | Generates a JWT token. | `{ user: { id, name }, token }` |

### Files

Route for sending image file.

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
POST | /files | Via Multipart Form: `file` | ❌ | Route to send an image | `{ id, url, name, path, createdAt, updatedAt }` |

### Admin routes: Requires JWT Token

>For all of the following routes, ** the jwt token ** must be sent. In the format <code style="color:red">Bearer TOKEN</code>

### Recipients

Routes for managing the ** recipients **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
POST | /recipients | `token JWT` | <code><span style="color:red">name</span></code>, <code><span style="color:red">street</span></code>, <code><span style="color:red">number</span></code>, <code><span style="color:red">city</span></code>, <code><span style="color:red">country</span></code> e <code><span style="color:red">postcode</span></code> | Create a recipient | `{ id, name, street, number, country, city, postcode }` |
PUT | /recipients/:id | `token JWT` e `id`: id referring to the recipient in the database | <code><span style="color:red">name</span></code>, <code><span style="color:red">street</span></code>, <code><span style="color:red">number</span></code>, <code><span style="color:red">country</span></code>, <code><span style="color:red">city</span></code> e <code><span style="color:red">postcode</span></code> | Updates a recipient | `{ id, name, street, number, country, city, postcode }` |
DELETE | /recipients/:id | `token JWT` e `id`: id referring to the recipient in the database | ❌ | Delete a recipient | `{ id, name, street, number, country, city, postcode }` |


### Deliveryman

** Delivery Managers ** Routes

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
POST | /deliveryman | `token JWT` | <code><span style="color:red">name</span></code> e <code><span style="color:red">email</span></code> | Create Delivery Man | `{ id, name, email }` |
PUT | /deliveryman/:id | `token JWT` e `id`: id referring to the recipient in the database | <code><span style="color:red">name</span></code> e <code><span style="color:red">email</span></code> | Edit Delivery Man | `{ id, name, email }` |
DELETE | /deliverymen/:id | `token JWT` e `id`: id referring to the recipient in the database | ❌ | Delete a deliveryman | `{ id, name, email }` |

### Delivery

Routes for ** order management **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
POST | /orders | `token JWT` | <code><span style="color:red">product</span></code>, <code><span style="color:red">recipient_id</span></code>, <code><span style="color:red">deliveryman_id</span></code> | Create Order | `{ id, product, deliveryman, recipient }` |
PUT | /orders/:id | `token JWT` e `id`: id referring to the recipient in the database |  <code><span style="color:red">product</span></code>, <code><span style="color:red">recipient_id</span></code>, <code><span style="color:red">deliveryman_id</span></code> | Edit Order | `{ id, product, deliveryman, recipient }` |
DELETE | /orders/:orderId/problems | `token JWT` e `orderId`: id referring to the recipient in the database | ❌ | Delete an order | `{ id, product, deliveryman, recipient }` |


### Deliveryman routes - JWT Token not required

### Delivery 

Routes for ** View Delivery **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
GET | /orders | ❌ | ❌ | List deliveries  | `{ order, recipient and deliveryman}` |
GET | /orders/:id | `id:` id referring to the order in the database | ❌ | List deliveries  | `{ order, recipient and deliveryman}` |

### Delivery Problems

Routes for ** order management **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
GET | /orders/problems/list | ❌ | ❌ | List deliveries with problem | `{ id, description, order_id }` |
POST | /orders/problems |  ❌ | <code><span style="color:red">description</span></code>, <code><span style="color:red">order_id</span></code> | Create Delivery Problem | `{ id, description, order_id }` |
GET | /orders/:orderId/problems | `orderId:` orderId referring to the recipient in the database | ❌ | List delivery with problem | `{ id, description, order_id }` |

### Deliveries Delivered

Routes for ** Deliveries Delivered **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
GET | /deliveryman/:id/deliveredorders | `id:` id referring to the recipient in the database | ❌ | List deliveries Delivered | `{ order, recipient and deliveryman}` |
PUT | /deliveryman/:id/deliveredorders |  `id:` id referring to the recipient in the database | <code><span style="color:red">orderId</span></code>, <code><span style="color:red">signature_id</span></code> | Ends delivery | `{ id, order  }` |

### Deliveries 

Routes for ** Deliveries management **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
GET | /deliveryman/:id/deliveries | `id:` id referring to the deliveryman in the database | ❌ | List deliveries  | `{ order, recipient and deliveryman}` |
PUT | /deliveryman/:id/deliveries |  `id:` id referring to the deliveryman in the database | <code><span style="color:red">order_id </span></code>, <code><span style="color:red">start_date</span></code> | Collect Delivery | `{ id, order  }` |

### Deliveryman

Routes for ** View Deliveryman **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
GET | /deliveryman/ | ❌ | ❌ | List deliverymen  | `{ [deliveryman] }` |
GET | /deliveryman/:id | `id:` id referring to the deliveryman in the database | ❌ | List deliveries  | `{ deliveryman }` |

### Recipients

Routes for ** View Recipients **

Method | URI | Parameters | Body | Description | Return |
-------|-----|:----------:|:----:|-----------|:-------:|
GET | /recipients | ❌ | ❌ | List recipients  | `{ [recipients] }` |
GET | /recipients/:id | `id:` id referring to the recipient in the database | ❌ | List recipient  | `{ recipient }` |